<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Secure Tabs</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: white;
}

header {
    display: flex;
    gap: 10px;
    padding: 15px;
    background: #0f172a;
}

button {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #334155;
    color: white;
    font-weight: bold;
    transition: 0.2s;
}

button:hover {
    background: #3b82f6;
}

.active {
    background: #3b82f6;
}

.container {
    padding: 20px;
}

textarea {
    width: 100%;
    height: 300px;
    border-radius: 12px;
    padding: 15px;
    background: #1e293b;
    color: white;
    border: none;
    font-size: 16px;
    resize: none;
}

h2 {
    margin-top: 0;
}
</style>
</head>
<body>

<header>
    <button onclick="openTab('public')" id="btn-public">Public</button>
    <button onclick="openTab('private1')" id="btn-private1">Private1</button>
    <button onclick="openTab('private2')" id="btn-private2">Private2</button>
</header>

<div class="container">
    <h2 id="title">Public</h2>
    <textarea id="editor"></textarea>
    <br><br>
    <button onclick="saveContent()">Save</button>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby3LDMdC9tiURP7ZtelDRH8JQ4b_5DbmayevBdK_T_w-0aWvcE-RCOo2nYP5Bvn1UU5LQ/exec";

let currentTab = "public";
let currentPassword = "";

function setActive(tab) {
    document.querySelectorAll("header button").forEach(btn => btn.classList.remove("active"));
    document.getElementById("btn-" + tab).classList.add("active");
}

function openTab(tab) {
    currentTab = tab;
    setActive(tab);

    if (tab !== "public") {
        const pw = prompt("Enter password for " + tab + ":");
        if (!pw) return;
        currentPassword = pw;
    } else {
        currentPassword = "";
    }

    document.getElementById("title").innerText = tab;

    fetch(SCRIPT_URL + "?tab=" + tab)
        .then(res => res.text())
        .then(data => {
            document.getElementById("editor").value = data;
        })
        .catch(err => {
            alert("Error loading content.");
            console.error(err);
        });
}

function saveContent() {
    fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({
            tab: currentTab,
            content: document.getElementById("editor").value,
            password: currentPassword
        })
    })
    .then(res => res.text())
    .then(response => {
        if (response === "INVALID_PASSWORD") {
            alert("Wrong password!");
        } else {
            alert("Saved successfully!");
        }
    })
    .catch(err => {
        alert("Error saving.");
        console.error(err);
    });
}

openTab("public");
</script>

</body>
</html>
